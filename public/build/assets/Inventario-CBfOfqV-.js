import{Q as j,d as b,G as z,o as i,c as N,w as x,a as o,t as g,i as A,e as d,h as v,F as y,f as m,m as l,p as a,q as u}from"./app-C8CjfH1x.js";import{_ as D}from"./AppLayout-DjOK1K87.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"flex justify-between flex-col md:flex-row"},q={class:"text-xl font-bold"},M={class:"py-4"},G={class:"max-w mx-auto sm:px-6 lg:px-8"},L={class:"overflow-hidden sm:rounded-lg"},P={class:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},Q={class:"mb-4"},T=o("h2",{class:"text-xl font-bold mb-4"},"Ingredientes",-1),H={class:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4"},J={class:"block"},K={class:"flex justify-between items-center lg:flex-row flex-col"},O={key:0,class:"font-light text-sm lg:text-base"},R={key:1,class:"font-light text-sm lg:text-base"},W=["onUpdate:modelValue"],X={key:1},Y=["onUpdate:modelValue"],Z=o("p",null,"Precio: ",-1),ee={class:"flex items-center"},oe=o("p",{class:"px-2"},"$",-1),te=["onUpdate:modelValue"],se={key:2,class:"flex flex-col gap-1 pt-2 justify-center items-center"},re=["onClick"],ne=["onClick"],ie={key:0,class:"bg-white shadow rounded border border-gray-300 p-4 items-center flex"},de=o("span",{class:"font-medium text-gray-500"},"Nuevo item",-1),le=o("input",{id:"nombre",type:"text",placeholder:"Ingrediente",class:"mt-1 block w-full border border-gray-300 rounded p-2"},null,-1),ae=o("input",{id:"precio",type:"number",placeholder:"$0.0",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:"0"},null,-1),ce={class:"mb-4"},ue=o("h2",{class:"text-xl font-bold"},"Bebidas",-1),pe={class:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4"},be={class:"block"},me={class:"flex justify-between items-center lg:flex-row flex-col"},ge={key:0,class:"font-medium"},_e={key:1,class:"font-medium"},he=["onUpdate:modelValue"],fe={key:1},xe=["onUpdate:modelValue"],ve={class:"flex items-center"},ye=o("p",{class:"px-2"},"$",-1),we=["onUpdate:modelValue"],ke={key:2,class:"flex flex-col gap-1 mt-2 justify-center items-center"},Ie=["onClick"],$e=["onClick"],Ee={key:0,class:"bg-white shadow border border-gray-300 rounded p-4 items-center flex"},Ve={class:"block h-full"},Be=o("div",{class:"flex justify-between w-full items-center"},[o("span",{class:"font-medium text-gray-500"},"Nuevo item")],-1),Ce={key:0,class:"w-full flex justify-end"},Ue=o("button",{type:"submit",class:"py-2 px-3 rounded-lg bg-orange-500 text-white font-bold"},"Actualizar Inventario",-1),Se=[Ue],De={__name:"Inventario",setup(je){const{props:p}=j(),w=b(p.ingredientes||[]),k=b(p.bebidas||[]),_=b(p.ingredientesInventario||[]),h=b(p.bebidasInventario||[]),f=b(p.sucursal||""),n=z({sucursal_id:f.value,ingredientes:w.value.map(e=>{var s;return{id:e.id,nombre:e.nombre,cantidad:((s=_.value.find(t=>t.id===e.id))==null?void 0:s.cantidad)||0,precio:e.precio||0}}),bebidas:k.value.map(e=>{var s;return{id:e.id,nombre:e.nombre,cantidad:((s=h.value.find(t=>t.id===e.id))==null?void 0:s.cantidad)||0,precio:e.precio||0}}),ingredientesInventario:_.value.map(e=>({id:e.id,nombre:e.nombre,cantidad:e.cantidad||0,precio:e.precio||0})),bebidasInventario:h.value.map(e=>({id:e.id,nombre:e.nombre,cantidad:e.cantidad||0,precio:e.precio||0}))}),I=()=>{console.log("Datos enviados:",n),u.post("/inventario",n,{onSuccess:()=>{console.log("Inventario actualizado con éxito")},onError:e=>{console.error("Error al actualizar el inventario:",e)}})},$=()=>{const e=document.getElementById("nombre"),s=e?e.value.trim():"",t=document.getElementById("precio"),r=t?t.value.trim():"";if(!s||!r){console.error("El nombre y el precio son requeridos.");return}const c={nombre:s,precio:parseFloat(r),cantidad:0,id:Date.now()};u.post("/ingredientes",{nombre:s,precio:parseFloat(r)},{onSuccess:()=>{console.log("Ingrediente agregado con éxito"),e.value="",t.value="",n.ingredientes.push(c)},onError:S=>{console.error("Error al agregar el ingrediente:",S)}})},E=()=>{const e={nombre:"",cantidad:0,id:Date.now()};n.bebidas.push(e),u.post("/bebidas",{sucursal_id:n.sucursal_id,ingredientes:[],bebidas:[e]},{onSuccess:()=>{console.log("Bebida agregada con éxito")},onError:s=>{console.error("Error al agregar la bebida:",s)}})},V=e=>{const s=n.ingredientes.find(t=>t.id===e);s&&u.put(`/ingredientes/${e}`,s,{onSuccess:()=>{console.log("Ingrediente actualizado con éxito")},onError:t=>{console.error("Error al actualizar el ingrediente:",t)}})},B=e=>{const s=n.bebidas.find(t=>t.id===e);s&&u.put(`/bebidas/${e}`,s,{onSuccess:()=>{console.log("Bebida actualizada con éxito")},onError:t=>{console.error("Error al actualizar la bebida:",t)}})},C=e=>{u.delete(`/ingredientes/${e}`,{onSuccess:()=>{n.ingredientes=n.ingredientes.filter(s=>s.id!==e),console.log("Ingrediente eliminado con éxito")},onError:s=>{console.error("Error al eliminar el ingrediente:",s)}})},U=e=>{u.delete(`/bebidas/${e}`,{onSuccess:()=>{n.bebidas=n.bebidas.filter(s=>s.id!==e),console.log("Bebida eliminada con éxito")},onError:s=>{console.error("Error al eliminar la bebida:",s)}})};return(e,s)=>(i(),N(D,{title:"Inventario"},{header:x(()=>[o("div",F,[o("div",null,[o("h1",q,"Inventario - Sucursal "+g(f.value),1)])])]),default:x(()=>[o("div",M,[o("div",G,[o("div",L,[o("div",P,[o("form",{onSubmit:A(I,["prevent"])},[o("div",Q,[T,o("div",H,[(i(!0),d(y,null,v(n.ingredientes,t=>(i(),d("div",{key:t.id,class:"bg-white border border-gray-300 shadow rounded-md p-4"},[o("label",J,[o("div",K,[e.$page.props.auth.user.sucursal_id>0?(i(),d("span",O,"Cantidad de "+g(t.nombre)+":",1)):(i(),d("span",R,"Nombre: "))]),e.$page.props.auth.user.sucursal_id>0?l((i(),d("input",{key:0,type:"number","onUpdate:modelValue":r=>n.ingredientes.find(c=>c.id===t.id).cantidad=r,class:"mt-1 block w-full border rounded p-2",min:0},null,8,W)),[[a,n.ingredientes.find(r=>r.id===t.id).cantidad,void 0,{number:!0}]]):(i(),d("div",X,[l(o("input",{type:"text","onUpdate:modelValue":r=>t.nombre=r,class:"mt-1 block w-full border border-gray-300 rounded p-2"},null,8,Y),[[a,t.nombre,void 0,{trim:!0}]]),Z,o("div",ee,[oe,l(o("input",{type:"number","onUpdate:modelValue":r=>n.ingredientes.find(c=>c.id===t.id).precio=r,class:"mt-1 block w-full border border-gray-300 rounded p-2 text-right",min:0},null,8,te),[[a,n.ingredientes.find(r=>r.id===t.id).precio,void 0,{number:!0}]])])])),e.$page.props.auth.user.sucursal_id==0?(i(),d("div",se,[o("span",{onClick:r=>V(t.id),class:"text-center text-xs px-10 py-2 w-fit bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg cursor-pointer"},"Actualizar",8,re),o("span",{onClick:r=>C(t.id),class:"text-center text-xs px-11 py-2 w-fit bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg cursor-pointer"},"Eliminar",8,ne)])):m("",!0)])]))),128)),e.$page.props.auth.user.sucursal_id==0?(i(),d("div",ie,[o("label",{class:"block w-full"},[de,le,ae,o("div",{class:"flex justify-center w-full items-center"},[o("div",{class:"flex flex-col gap-1 mt-2"},[o("span",{onClick:$,class:"text-center text-xs px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg cursor-pointer"},"Agregar")])])])])):m("",!0)])]),o("div",ce,[ue,o("div",pe,[(i(!0),d(y,null,v(n.bebidas,t=>(i(),d("div",{key:t.id,class:"bg-white shadow rounded border border-gray-300 p-4"},[o("label",be,[o("div",me,[e.$page.props.auth.user.sucursal_id>0?(i(),d("span",ge,"Cantidad de "+g(t.nombre)+":",1)):(i(),d("span",_e,"Nombre:"))]),e.$page.props.auth.user.sucursal_id>0?l((i(),d("input",{key:0,type:"number","onUpdate:modelValue":r=>n.bebidas.find(c=>c.id===t.id).cantidad=r,class:"mt-1 block w-full border rounded p-2",min:0},null,8,he)),[[a,n.bebidas.find(r=>r.id===t.id).cantidad,void 0,{number:!0}]]):(i(),d("div",fe,[l(o("input",{type:"text","onUpdate:modelValue":r=>t.nombre=r,class:"mt-1 block w-full border rounded p-2 border-gray-300"},null,8,xe),[[a,t.nombre,void 0,{trim:!0}]]),o("div",ve,[ye,l(o("input",{type:"text","onUpdate:modelValue":r=>t.precio=r,class:"mt-1 block w-full border rounded p-2 border-gray-300"},null,8,we),[[a,t.precio,void 0,{number:!0}]])])])),e.$page.props.auth.user.sucursal_id==0?(i(),d("div",ke,[o("span",{onClick:r=>B(t.id),class:"text-center w-fit text-xs px-10 py-2 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg cursor-pointer"},"Actualizar",8,Ie),o("span",{onClick:r=>U(t.id),class:"text-center w-fit text-xs px-11 py-2 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg cursor-pointer"},"Eliminar",8,$e)])):m("",!0)])]))),128)),e.$page.props.auth.user.sucursal_id==0?(i(),d("div",Ee,[o("label",Ve,[Be,l(o("input",{id:"nombre",type:"text",placeholder:"Bebida",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:0,"onUpdate:modelValue":s[0]||(s[0]=t=>n.bebidas.nombre=t)},null,512),[[a,n.bebidas.nombre,void 0,{trim:!0}]]),l(o("input",{id:"precio",type:"number",placeholder:"$0.0",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:0,"onUpdate:modelValue":s[1]||(s[1]=t=>n.bebidas.precio=t)},null,512),[[a,n.bebidas.precio,void 0,{number:!0}]]),o("div",{class:"flex justify-center items-center w-full mt-2"},[o("span",{onClick:E,class:"text-center text-xs px-10 py-2 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg cursor-pointer"},"Agregar")])])])):m("",!0)])]),e.$page.props.auth.user.sucursal_id>0?(i(),d("div",Ce,Se)):m("",!0)],32)])])])])]),_:1}))}};export{De as default};
