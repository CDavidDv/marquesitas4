import{Q,d as a,G as V,o as d,c as T,w as C,a as s,t as _,i as H,e as l,f as u,h as U,F as S,m as p,p as m,q as b}from"./app-BcVz0gFs.js";import{_ as J}from"./AppLayout-BCxMC4vW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"flex justify-between flex-col md:flex-row"},O={class:"text-xl font-bold"},R={class:"py-4"},W={class:"max-w mx-auto sm:px-6 lg:px-8"},X={class:"overflow-hidden sm:rounded-lg"},Y={class:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},Z={class:"mb-4"},ee={class:"flex flex-col md:flex-row gap-2"},oe=s("h2",{class:"text-xl font-bold mb-4"},"Ingredientes",-1),te={key:0,class:"text-red-500 font-bold mt-2"},se={class:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4"},re={class:"block overflow-hidden"},ne={class:"flex justify-between items-center lg:flex-row flex-col"},de={key:0,class:"font-light text-sm lg:text-base"},le={key:1,class:"font-light text-sm lg:text-base"},ie=["onUpdate:modelValue"],ae={key:1,class:""},ce=["onUpdate:modelValue"],ue=s("p",null,"Precio: ",-1),pe={class:"flex items-center"},me=s("p",{class:"px-2"},"$",-1),be=["onUpdate:modelValue"],ge={key:2,class:"flex flex-col gap-1 pt-2 justify-center items-center"},_e=["onClick"],he=["onClick"],fe={key:0,class:"bg-white shadow rounded border border-gray-300 p-4 items-center flex"},ve={class:"block w-full"},xe=s("span",{class:"font-medium text-gray-500"},"Nuevo item",-1),ye=s("input",{id:"nombre",type:"text",placeholder:"Ingrediente",class:"mt-1 block w-full border border-gray-300 rounded p-2"},null,-1),we=s("input",{id:"precio",type:"number",placeholder:"$0.0",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:"0",step:"0.10"},null,-1),ke={class:"flex justify-center w-full items-center"},Ie={class:"flex flex-col gap-1 mt-2"},Ee={key:0,class:"text-red-500 mt-2"},Be={class:"mb-4"},$e=s("h2",{class:"text-xl font-bold"},"Bebidas",-1),Ne={class:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4"},Ve={class:"block overflow-hidden"},Ce={class:"flex justify-between items-center lg:flex-row flex-col"},Ue={key:0,class:"font-medium"},Se={key:1,class:"font-medium"},je=["onUpdate:modelValue"],ze={key:1},Ae=["onUpdate:modelValue"],Fe={class:"flex items-center"},qe=s("p",{class:"px-2"},"$",-1),De=["onUpdate:modelValue"],Me={key:2,class:"flex flex-col gap-1 mt-2 justify-center items-center"},Ge=["onClick"],Le=["onClick"],Pe={key:0,class:"bg-white shadow border border-gray-300 rounded p-4 items-center flex"},Qe={class:"block h-full"},Te=s("div",{class:"flex justify-between w-full items-center"},[s("span",{class:"font-medium text-gray-500"},"Nuevo item")],-1),He={key:0,class:"text-red-500 mt-2"},Je={key:0,class:"w-full flex justify-end"},Ke=s("button",{type:"submit",class:"py-2 px-3 rounded-lg bg-orange-500 text-white font-bold"},"Actualizar Inventario",-1),Oe=[Ke],Ze={__name:"IngrediBebidas",setup(Re){var I,E,B,$,N;const{props:c}=Q(),j=a(c.ingredientes||[]),z=a(c.bebidas||[]),x=a(c.ingredientesInventario||[]),y=a(c.bebidasInventario||[]),w=a(c.sucursal||""),g=a(""),h=a(""),f=a(""),k=V([]);console.log(c.categorias.length),c.categorias.forEach(e=>{k[e.id]={nombre:"",precio:"",cantidad:""},console.log(k)}),a(c.itemsporcat||[]),a("");const A=a(c.categorias||[]);a({}),a(""),a({});const n=V({sucursal_id:w.value,ingredientes:((I=j.value)==null?void 0:I.map(e=>{var o;return{id:e==null?void 0:e.id,nombre:e==null?void 0:e.nombre,cantidad:((o=x.value.find(t=>(t==null?void 0:t.id)===(e==null?void 0:e.id)))==null?void 0:o.cantidad)||0,precio:(e==null?void 0:e.precio)||0}}))||[],bebidas:((E=z.value)==null?void 0:E.map(e=>{var o;return{id:e==null?void 0:e.id,nombre:e==null?void 0:e.nombre,cantidad:((o=y.value.find(t=>(t==null?void 0:t.id)===(e==null?void 0:e.id)))==null?void 0:o.cantidad)||0,precio:(e==null?void 0:e.precio)||0}}))||[],ingredientesInventario:((B=x.value)==null?void 0:B.map(e=>({id:e==null?void 0:e.id,nombre:e==null?void 0:e.nombre,cantidad:(e==null?void 0:e.cantidad)||0,precio:(e==null?void 0:e.precio)||0})))||[],bebidasInventario:(($=y.value)==null?void 0:$.map(e=>({id:e==null?void 0:e.id,nombre:e==null?void 0:e.nombre,cantidad:(e==null?void 0:e.cantidad)||0,precio:(e==null?void 0:e.precio)||0})))||[],categorias:((N=A.value)==null?void 0:N.map(e=>({id:e==null?void 0:e.id,nombre:e==null?void 0:e.nombre,items:(e==null?void 0:e.items.map(o=>({id:o==null?void 0:o.id,nombre:o==null?void 0:o.nombre,precio:(o==null?void 0:o.precio)||0,cantidad:(o==null?void 0:o.cantidad)||0})))||[]})))||[]}),F=()=>{console.log("Datos enviados:",n),b.post("/inventario",n,{onSuccess:()=>{console.log("Inventario actualizado con éxito")},onError:e=>{console.error("Error al actualizar el inventario:",e)}})},q=()=>{const e=document.getElementById("nombre"),o=e?e.value.trim():"",t=document.getElementById("precio"),r=t?t.value.trim():"";if(!o||!r){f.value="Nombre y precio son requeridos";return}b.post("/ingredientes",{nombre:o,precio:parseFloat(r)},{onSuccess:i=>{console.log("Ingrediente agregado con éxito"),e.value="",t.value="";const v=i.props.ingredientes[i.props.ingredientes.length-1];n.ingredientes=[...n.ingredientes,{...v}]},onError:i=>{console.error("Error al agregar el ingrediente:",i)}})},D=()=>{const e=document.getElementById("nombreB"),o=e?e.value.trim():"",t=document.getElementById("precioB"),r=t?t.value.trim():"";if(!o||!r){h.value="Nombre y precio son requeridos";return}b.post("/bebidas",{nombre:o,precio:parseFloat(r),cantidad:0},{onSuccess:i=>{e.value="",t.value="";const v=i.props.bebidas[i.props.bebidas.length-1];n.bebidas=[...n.bebidas,{...v}]},onError:i=>{console.error("Error al agregar la bebida:",i)}})},M=e=>{const o=n.ingredientes.find(t=>t.id===e);if(o){if(!o.nombre||o.nombre.trim()===""){console.log(o.nombre),g.value="El nombre está vacío o solo contiene espacios";return}if(!o.precio||isNaN(o.precio)||Number(o.precio.value)===0){g.value="El precio está vacío, no es válido o es 0";return}b.put(`/ingredientes/${e}`,o,{onSuccess:()=>{console.log("Ingrediente actualizado con éxito")},onError:t=>{console.error("Error al actualizar el ingrediente:",t)}})}},G=e=>{const o=n.bebidas.find(t=>t.id===e);if(o){if(!o.nombre||o.nombre.trim()===""){console.log(o.nombre),g.value="El nombre está vacío o solo contiene espacios";return}if(!o.precio||isNaN(o.precio)||Number(o.precio.value)===0){g.value="El precio está vacío, no es válido o es 0";return}b.put(`/bebidas/${e}`,o,{onSuccess:()=>{console.log("Bebida actualizada con éxito")},onError:t=>{console.error("Error al actualizar la bebida:",t)}})}},L=e=>{b.delete(`/ingredientes/${e}`,{onSuccess:()=>{n.ingredientes=n.ingredientes.filter(o=>o.id!==e),console.log("Ingrediente eliminado con éxito")},onError:o=>{console.error("Error al eliminar el ingrediente:",o)}})},P=e=>{b.delete(`/bebidas/${e}`,{onSuccess:()=>{n.bebidas=n.bebidas.filter(o=>o.id!==e),console.log("Bebida eliminada con éxito")},onError:o=>{console.error("Error al eliminar la bebida:",o)}})};return(e,o)=>(d(),T(J,{title:"Inventario"},{header:C(()=>[s("div",K,[s("div",null,[s("h1",O,"Inventario - Sucursal "+_(w.value),1)])])]),default:C(()=>[s("div",R,[s("div",W,[s("div",X,[s("div",Y,[s("form",{onSubmit:H(F,["prevent"])},[s("div",Z,[s("div",ee,[oe,g.value?(d(),l("div",te,_(g.value),1)):u("",!0)]),s("div",se,[(d(!0),l(S,null,U(n.ingredientes,t=>(d(),l("div",{key:t.id,class:"bg-white border border-gray-300 shadow rounded-md p-4"},[s("label",re,[s("div",ne,[e.$page.props.auth.user.sucursal_id>0?(d(),l("span",de,"Cantidad de "+_(t.nombre)+":",1)):(d(),l("span",le,"Nombre: "))]),e.$page.props.auth.user.sucursal_id>0?p((d(),l("input",{key:0,type:"number","onUpdate:modelValue":r=>n.ingredientes.find(i=>i.id===t.id).cantidad=r,class:"mt-1 block w-full border rounded p-2",step:"0.10"},null,8,ie)),[[m,n.ingredientes.find(r=>r.id===t.id).cantidad,void 0,{number:!0}]]):(d(),l("div",ae,[p(s("input",{type:"text","onUpdate:modelValue":r=>t.nombre=r,class:"mt-1 block w-full border border-gray-300 rounded p-2"},null,8,ce),[[m,t.nombre,void 0,{trim:!0}]]),ue,s("div",pe,[me,p(s("input",{type:"number","onUpdate:modelValue":r=>n.ingredientes.find(i=>i.id===t.id).precio=r,class:"mt-1 block w-full border border-gray-300 rounded p-2 text-right",min:0,step:"0.10"},null,8,be),[[m,n.ingredientes.find(r=>r.id===t.id).precio,void 0,{number:!0}]])])])),e.$page.props.auth.user.sucursal_id==0?(d(),l("div",ge,[s("span",{onClick:r=>M(t.id),class:"text-center text-xs px-10 py-2 w-fit bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg cursor-pointer"},"Actualizar",8,_e),s("span",{onClick:r=>L(t.id),class:"text-center text-xs px-11 py-2 w-fit bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg cursor-pointer"},"Eliminar",8,he)])):u("",!0)])]))),128)),e.$page.props.auth.user.sucursal_id==0?(d(),l("div",fe,[s("label",ve,[xe,ye,we,s("div",ke,[s("div",Ie,[s("span",{onClick:q,class:"text-center text-xs px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg cursor-pointer"},"Agregar"),f.value?(d(),l("div",Ee,_(f.value),1)):u("",!0)])])])])):u("",!0)])]),s("div",Be,[$e,s("div",Ne,[(d(!0),l(S,null,U(n.bebidas,t=>(d(),l("div",{key:t.id,class:"bg-white shadow rounded border border-gray-300 p-4"},[s("label",Ve,[s("div",Ce,[e.$page.props.auth.user.sucursal_id>0?(d(),l("span",Ue,"Cantidad de "+_(t.nombre)+":",1)):(d(),l("span",Se,"Nombre:"))]),e.$page.props.auth.user.sucursal_id>0?p((d(),l("input",{key:0,type:"number","onUpdate:modelValue":r=>n.bebidas.find(i=>i.id===t.id).cantidad=r,class:"mt-1 block w-full border rounded p-2",min:0,step:"0.10"},null,8,je)),[[m,n.bebidas.find(r=>r.id===t.id).cantidad,void 0,{number:!0}]]):(d(),l("div",ze,[p(s("input",{type:"text","onUpdate:modelValue":r=>t.nombre=r,class:"mt-1 block w-full border rounded p-2 border-gray-300"},null,8,Ae),[[m,t.nombre,void 0,{trim:!0}]]),s("div",Fe,[qe,p(s("input",{type:"number","onUpdate:modelValue":r=>t.precio=r,min:0,class:"mt-1 block w-full border rounded p-2 border-gray-300"},null,8,De),[[m,t.precio,void 0,{number:!0}]])])])),e.$page.props.auth.user.sucursal_id==0?(d(),l("div",Me,[s("span",{onClick:r=>G(t.id),class:"text-center w-fit text-xs px-10 py-2 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg cursor-pointer"},"Actualizar",8,Ge),s("span",{onClick:r=>P(t.id),class:"text-center w-fit text-xs px-11 py-2 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg cursor-pointer"},"Eliminar",8,Le)])):u("",!0)])]))),128)),e.$page.props.auth.user.sucursal_id==0?(d(),l("div",Pe,[s("label",Qe,[Te,p(s("input",{id:"nombreB",type:"text",placeholder:"Bebida",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:0,"onUpdate:modelValue":o[0]||(o[0]=t=>n.bebidas.nombre=t)},null,512),[[m,n.bebidas.nombre,void 0,{trim:!0}]]),p(s("input",{id:"precioB",type:"number",placeholder:"$0.0",class:"mt-1 block w-full border border-gray-300 rounded p-2",min:0,"onUpdate:modelValue":o[1]||(o[1]=t=>n.bebidas.precio=t),step:"0.10"},null,512),[[m,n.bebidas.precio,void 0,{number:!0}]]),s("div",{class:"flex justify-center items-center w-full mt-2"},[s("span",{onClick:D,class:"text-center text-xs px-10 py-2 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg cursor-pointer"},"Agregar")]),h.value?(d(),l("div",He,_(h.value),1)):u("",!0)])])):u("",!0)])]),e.$page.props.auth.user.sucursal_id>0?(d(),l("div",Je,Oe)):u("",!0)],32)])])])])]),_:1}))}};export{Ze as default};
